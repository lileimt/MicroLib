<!DOCTYPE html>
<html lang="en">
  <head>
  <title>table</title>
  <link rel="stylesheet" type="text/css" href="css/main.css" />
  <script src="js/qwebchannel.js"></script>
  <script src="js/jquery-3.2.1.min.js"></script>
  <script src="js/colResizable-1.5.min.js"></script>
  <script src="js/oauth2.js"></script>
  <script src="js/sort.js"></script>
  <script src="js/table.js"></script>
  <script src="js/channel.js"></script>
  <script src="js/data.js"></script>
  <script src="js/util.js"></script>
  <script type="text/javascript">
    var shareFilesData = {
      id:0,
      isDir:true,
      name:"公共目录",
      children:[{
        id:1,
        isDir:1,
        md5:"1234567890",
        fileIcon:"filetype/barcode_result_page_type_file_dir_icon.png",
        name:"我的文件",
        ownername:"lileimt",
        filesize:"11.1 MB",
        createTime:"11:11",
        children:[{
          id:2,
          isDir:1,
          md5:"1234567890",
          fileIcon:"filetype/barcode_result_page_type_file_dir_icon.png",
          name:"iphone2",
          ownername:"lileimt",
          filesize:"11.1 MB",
          createTime:"11:11",
          children:[{
            id:5,
            isDir:1,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_file_dir_icon.png",
            name:"iphone3",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11",
            children:[
              {
                id:6,
                isDir:2,
                md5:"1234567890",
                fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
                name:"iphone4.apk",
                ownername:"lileimt",
                filesize:"11.1 MB",
                createTime:"11:11"
              }]
            }]
          }]
        },{
          id:3,
          isDir:2,
          md5:"1234567890",
          fileIcon:"filetype/barcode_result_page_type_file_dir_icon.png",
          name:"iphone4",
          ownername:"lileimt",
          filesize:"11.1 MB",
          createTime:"11:11",
          children:[{
            id:4,
            isDir:false,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone2.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
          }]
        },{
            id:4,
            isDir:2,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone2.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        },{
            id:7,
            isDir:2,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone3.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        },{
            id:8,
            isDir:2,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"我的iphone5.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        },{
            id:9,
            isDir:2,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone6.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        },{
            id:10,
            isDir:2,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone7.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        },{
            id:11,
            isDir:2,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone8.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        },{
            id:12,
            isDir:2,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone9.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        }]
      }

    var myFilesData = {
      id:0,
      isDir:true,
      name:"我的文件",
      children:[{
        id:1,
        isDir:true,
        md5:"1234567890",
        fileIcon:"filetype/barcode_result_page_type_file_dir_icon.png",
        name:"收到的文件",
        ownername:"lileimt",
        filesize:"11.1 MB",
        createTime:"11:11",
        children:[{
          id:2,
          isDir:true,
          md5:"1234567890",
          fileIcon:"filetype/barcode_result_page_type_file_dir_icon.png",
          name:"iphone12",
          ownername:"lileimt",
          filesize:"11.1 MB",
          createTime:"11:11",
          children:[{
            id:5,
            isDir:true,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_file_dir_icon.png",
            name:"iphone13",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11",
            children:[
              {
                id:6,
                isDir:false,
                md5:"1234567890",
                fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
                name:"iphone14.apk",
                ownername:"lileimt",
                filesize:"11.1 MB",
                createTime:"11:11"
              }]
            }]
          }]
        },{
          id:3,
          isDir:true,
          md5:"1234567890",
          fileIcon:"filetype/barcode_result_page_type_file_dir_icon.png",
          name:"iphone14",
          ownername:"lileimt",
          filesize:"11.1 MB",
          createTime:"11:11",
          children:[{
            id:4,
            isDir:false,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone12.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
          }]
        },{
            id:4,
            isDir:false,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone12.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        },{
            id:7,
            isDir:false,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone13.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        },{
            id:8,
            isDir:false,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"我的iphone15.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        },{
            id:9,
            isDir:false,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone61.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        },{
            id:10,
            isDir:false,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone17.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        },{
            id:11,
            isDir:false,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone18.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        },{
            id:12,
            isDir:false,
            md5:"1234567890",
            fileIcon:"filetype/barcode_result_page_type_apk_icon.png",
            name:"iphone19.apk",
            ownername:"lileimt",
            filesize:"11.1 MB",
            createTime:"11:11"
        }]
      }

  //var curListData = {};
  var curType = 0   //0代表公共目录，1代表我的文件
  var curSort = 0   //0代表down，降序  1代表up，升序
  var curMode = 0   //0代表列表模式 1代表视图模式
  var curDirName = "公共目录";

  var shareFile = new ListType(0,{id:0,name:"公共目录"})
  //shareFile.totalDir = shareFilesData
  //shareFile.curPage = shareFilesData.children
  var myFile = new ListType(1,{id:0,name:"我的文件"})
  //myFile.totalDir = myFilesData
  //myFile.curPage = myFilesData.children

  $(function(){	  
    $(document).ready(function(){
      $("#sample2").colResizable({
        liveDrag:true, 
        gripInnerHtml:"<div class='grip'></div>", 
        draggingClass:"dragging"
      });
     
      //Qt交互
      new QWebChannel(qt.webChannelTransport,function(obj){
        window.bridge = obj.objects.channel;

        //获取接口数据
        oauth2.getShareFilesById(0,{
          success:function(data){
            shareFilesData = data;
            shareFile.totalDir = shareFilesData;
            shareFile.curPage = shareFilesData.son;
            util.showTable();
          },error:function(xhr,type,errorThrown){
            console.log(xhr);
          }
        });
        oauth2.getMyFilesById(0,{
          success:function(data){
            myFilesData = data;
            myFile.totalDir = myFilesData;
            myFile.curPage = myFilesData.son;
          },error:function(xhr,type,errorThrown){
            console.log(xhr);
          }
        });
        channel.getDataByType();
        channel.setNewDir();
        channel.getCurFiles();  //监听下载事件
        channel.deleteFiles();
      });
    });
  });
  
  </script>
  </head>
  <body>
  <div class="hui-resize-table" id="resizeTable">
    <div class="hui-path">
        <div>
          <a class="hui-arrows">
            <img src="img/left.png" />
          </a>
          <span id="tablebar">
          <!-- <span>
            <a class="hui-step first" href="###" id="0" onclick=gotoFile(this,0)></a>
          </span> -->
          </span>
        </div>
        <div class="hui-operate">
            <img id="refreshBtn" src="img/refresh.png" >
            <img id="rankBtn" src="img/rank.png" >
            <img id="cutBtn" src="img/list.png" >
            <ul class="rankBox">
              <li >名称</li>
              <li class="rankIcon"><img src="img/down.png" />文件大小</li>
              <li>更新时间</li>
            </ul>
        </div>
    </div>
    <div class="refresh">
      <table id="sample2" class="hui-list-table" width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr class="hui-table-title">
          <!--th class="header_name" width="60%">
            <input type="checkbox" class="hui-checkbox checkbox" id="allChecked" name="allChecked"/>
            名称
            <span class="rankImg">
              <img class="hui-icon-down" src="img/down.png" />
            </span>
          </th>
          <th>创建者</th>
          <th>大小</th>
          <th>创建时间</th-->
        </tr>
        <tbody id="tbody">

        </tbody>
      </table>
      <div id="sample1" class="hui-img-table">
        <div class="allChecked">
            <input type="checkbox" class="checkbox" id="imgAllChecked" name="imgAllChecked"/>
            <span>全选</span>
        </div>
        <ul id="vbody" class="listBox">
            
        </ul>
      </div>
      <div id="rightKey">
        <ul>
          <li class="downLoad">下载</li>
          <li class="send">发送</li>
          <li class="rightKeyRename">重命名</li>
          <li class="rightKeyDelete">删除</li>
        </ul>
      </div>
      <div id="operate">
        <ul>
          <li class="downLoad">上传</li>
          <li class="send">新建文件夹</li>
          <li class="rightKeyRename">查看</li>
          <li class="rightKeyDelete">刷新</li>
          <li class="rightKeyDelete">排序</li>
        </ul>
      </div>
    </div>
  </div>
  <script src="js/index.js"></script>
</body>
</html>